{% extends "base.html" %}
{% load bootstrap4 %}

{% block breadcrumbs %}
{{ block.super }}<span class="text-primary">Корзина</span>
{% endblock %}



{% load static %}
{% block title %}
{% endblock %}

{% block content %}


<div class="container-fluid">
<div class="table-responsive-sm">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Фото</th>
        <th scope="col">Бренд</th>
        <th scope="col">Имя</th>
        <th scope="col">Артикул</th>
        <th scope="col">Цена</th>
        <th scope="col">Количество</th>
        <th scope="col">Сумма</th>
        <th scope="col">Удалить</th>
      </tr>
    </thead>
{% for item in cart %}
{% with product=item.product %}
    <tbody>
      <tr>
        <th scope="row">
          <a class="thumbnail pull-left" href="{% url 'shop:show_category' product.get_absolute_url %}"> <img src="{% if product.image %}{{ product.image.url }} {% else %}{% static "img/no_image.png" %}{% endif %}" style="width: 72px; height: 72px;"></a>
        </th>
        <td>
           {{ product.vendor }}
        </td>
        <td>
          <a href="{% url 'shop:show_category' product.get_absolute_url %}">{{ product.name }}
        </td>
        <td>
          {{ product.vendor_code }}
        </td>
        <td>
          {{ product.price }}
        </td>
        <td>
          <form action="{% url "cart:cart_add" product.id %}" method="post" class="add">
           {{ item.update_quantity_form.quantity }}
           {{ item.update_quantity_form.update }}
           {% csrf_token %}
           <button type="submit" class="btn btn-outline-primary"><i class="fab fa-get-pocket"></i></button>
           </form>
        </td>
        <td>
           {{ item.total_price }}
        </td>
        <td>
          <a href="{% url "cart:cart_remove" product.id %}" class="btn btn-outline-danger"><i class="fas fa-trash-alt"></i><role="button" aria-pressed="true">
        </td>
    </tbody>
    {% endwith %}
    {% endfor %}
  </table>
</div>
</div>
      <div class="row">
                <div class="col-6">
                  <a href="{% url "shop:product_list" %}" class="btn btn-block btn-outline-primary">Shoping<role="button" ></a>
                </div>
                <div class="col-6">
                    <a href="{% url "order:order_create" %}" class="btn btn-block btn-outline-success">{{ cart.get_total_price }}<role="button"></a>
                </div>
            </div>
        </div>
        </div>
    </div>
</div>
<hr>
{% comment %}
  
  <h1>Ваша корзина товаров</h1>

    <a href="{% url "shop:product_list" %}" class="btn">Продолжить Шопинг</a>
    <a href="{% url "order:order_create" %}" class="btn">Оформить заказ</a>
<table class="table">
  <thead>
    <tr>
        <th>Изображение</th>
        <th>Продукт</th>
        <th>Цена</th>
        <th>Количество/Обновить</th>
        <th>Сумма</th>
        <th>Удалить</th>
    </tr>
  </thead>

{% for item in cart %}
{% with product=item.product %}

  <tbody>
    <tr>
        <td>
          <a href="{{ product.get_absolute_url }}">
          <img src="{% if product.image %}{{ product.image.url }} {% else %}{% static "img/no_image.png" %}{% endif %}" width="53" height="53" alt="lorem">
        </td>

        <td>
          {{ product.name }}
        </td>

        <td>
          {{ item.price_uah }}
        </td>

        <td>
          <form action="{% url "cart:cart_add" product.id %}" method="post" class="add">
          {{ item.update_quantity_form.quantity }}
          {{ item.update_quantity_form.update }}
          {% csrf_token %}
          <input type="submit" value="Обновить">
        </form>
        </td>

        <td>
          {{ item.total_price_uah }}
        </td>

        <td>
          <a href="{% url "cart:cart_remove" product.id %}">Удалить</a>
        </td>
    </tr>

 {% endwith %}
{% endfor %}

    <tr class="total">
          <td>
            Total
          </td>

          <td
             class="num">{{ cart.get_total_price_uah }}
          </td>
    </tr>

  </tbody>
</table>


{% endcomment %}


{% endblock %}