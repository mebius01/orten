{% extends 'shop/list_category.html' %}
{% load bootstrap4 %}
{% load static %}
{% load i18n %}
{% block head %}
    <title>{{ object.name }}</title>
    <meta name="title" content="{{object.name}} - купить в Николаеве и Украине">
    <meta name="description" content="{{object.name}} - {{object.price}} грн. - купить в Николаеве и Украине ★ {{object.description}} ★ Более 20 лет рынке копировальной техники и сервисного обслуживания">
{% endblock %}
{% block breadcrumbs %}
    {{ block.super }}
    {% for i in object.category.get_anc %}
        <li><a href="{% url 'shop:list_category' i.get_absolute_url %}">{{ i.name }}</a></li>
    {% endfor %}
        <li>{{object.name}}</li>
    {% endblock %}
    {% block content %}
		<div class="product_detail">
            <script type="application/ld+json">
				{% include "include/product_detail.json" %}
			</script>
            <div class="product_header">
                {% if object.action %}
                <h2 style="color:#fc6251">Акция до {{object.end_action|date:"d.m.y"}}</h2>
                <br>
                {% endif %}
                <h1>{{ object.name }}</h1>
            </div>
            <div class="product_img">
                <img style="max-width:100%;" src="{% if object.image %}{{ object.image.url }} {% else %}{% static "img/no_image.png" %}{% endif %}" alt="{{object.name}}" title="{{object.name}}">
            </div>
            <div class="feature">
                <div class="specification">
                    <p class="p_left">Артикул:</p>
                    <p class="p_right">{{ object.vendor_code }}</p>
                    <br><hr>
                    <p class="p_left">Производитель:</p>
                    <p class="p_right">{{object.vendor}}</p>
                    <br><hr>
                    <p class="p_left">Тип товара:</p>
                    <p class="p_right">{{object.type_product}}</p>
                    <br><hr>
                    {% if object.action %}
                        <h4><span style="float: left">Цена: </span> <span style="color:#fc6251; float:right">{{object.discount}}</span></h4>
                    <br>
                        <H5><span style="float:left" >Цена:</span> <span style="text-decoration: line-through; float:right">{{object.price}}</span></H5>
                    {% else %}
                        <h4><span style="float:left" >Цена:</span> <span style="color:#fc6251; float:right">{{object.price}}</span></h4>
                    {% endif %}
                </div>
                <br><hr>
                <div class="c_p_d">
                    <ul>
                        <li class="more" href=""><i class="far fa-credit-card"></i></li>
                        <li><a href=""><i class="fas fa-truck"></i></a></li>
                        <li><a href=""><i class="fas fa-phone"></i></a></li>
                    </ul>
                </div>
                <div class="overlay">
                    <div class="close">x</div>
                    <div class="flat_block">
                        <div class="card_header">
                            ОПЛАТА
                        </div>
                        <hr>
                        <div>
                            <p>
                                    Компания «Ортэн» работает как с юридическими, так и с частными лицами. Потому оплата услуг компании может осуществляться несколькими вариантами на выбор.
                            </p>
                            <hr>
                            <b>
                                <p>
                                        Наличный расчет (ФОП Сіряков С.В.)
                                </p>
                                <p>
                                        Безналичный расчет
                                </p>
                                <p>
                                        Гарантированный платеж
                                </p>
                            </b>
                            <hr>
                            <p>
                                    Также вы можете оплатить заказ наложенным платежом либо внести предоплату
                            </p>
                            <hr>
                            <p>
                                    После оформления заказа с вами свяжется менеджер и предоставит реквизиты для оплаты.
                                    К товару прилагается стандартный пакет сопроводительных документов, которые удовлетворят требования и юридических лиц, и частных.
                            </p>
                        </div>
                    </div>
                </div>
                <style>
                .more {
                    color: #0275d8;
                    cursor: pointer;
                }
                .overlay {
                    /* max-height: calc(100% - 100px); */
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    display: none;
                }
                .flat_block {
                    background-color: var(--global_background_color);
                    border: 1px solid var(--global_geen);
                }
                </style>
                <script>
                    let more = document.querySelector('.more'),
                        overlay = document.querySelector('.overlay'),
                        close = document.querySelector('.close');
                    more.addEventListener('click', function() {
                        overlay.style.display = 'block';
                    });
                    close.addEventListener('click', function() {
                        overlay.style.display = 'none';
                    });
                    document.addEventListener('keydown', function(event) {
                        if (event.key === 'Escape' || event.keyCode === 27) {
                            overlay.style.display = 'none';
                        }
                    });
                </script>
                {% if object.available %}
                <div class="foot_card_quantity">
                    <form action="{% url "cart:cart_add" object.id %}" method="post">
                       {% csrf_token %}
                      {{form.quantity}}
                      {{form.update}}
                      <button type="submit" class="apply">
                       <i style="padding-right:5px;" class="fa fa-shopping-cart"></i>Купить</button>
                    </form>
                </div>
                {% else %}
                <div style="color:red; text-align: center">
                    <span>
                            В данный момент этот товар отсутствует,
                            но Вы можете сделать заказ и
                            получить детальную информацию о возможности поставки.
                    </span>
                </div>
                <br><hr>
                <div class="foot_card_quantity style="color:red;">
                    <form action="{% url "cart:cart_add" object.id %}" method="post">
                       {% csrf_token %}
                      {{form.quantity}}
                      {{form.update}}
                      <button type="submit" class="apply">
                       <i style="padding-right:5px;" class="fa fa-shopping-cart"></i>Купить</button>
                    </form>
                </div>
                {% endif %}
            </div>
            <div class="description">
                <div class="descript">
                    <strong>Краткое описание:</strong>
                    <p>
                    	{{ object.description|linebreaks }}
                    </p>
                    <br><hr>
                </div>
                <div class="spec">
                    <strong>Характеристика:</strong>
                    <p>
                    	{{ object.specifications|safe }}
                    </p>
                </div>
            </div>
            <div class="accessories">
            </div>
        </div>
	{% endblock %}
